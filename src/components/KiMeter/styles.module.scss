@use 'sass:math';

.kiMeter {
  position: absolute;
  right: -10px;
  bottom: -10px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 45px;
  height: 45px;
  pointer-events: none;
}

.circle {
  position: relative;
  width: 100%;
  height: 100%;
  background: transparent;
  border: 2px solid #00bcd4;
  border-radius: 50%;
  box-shadow: 0 0 4px rgba(0, 188, 212, 0.4);
}

.segment {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  // 0度から30度までのborderを表示（太くして見やすく）
  border: 8px solid transparent;
  border-top-color: rgba(255, 255, 255, 0.3);
  border-radius: 50%;

  // 28度分だけ表示するためのマスク（2px隙間用に調整）
  // 0度: (50%, 0%)
  // 28度: (50% + 50% * sin(28°), 50% - 50% * cos(28°)) = (73.5%, 5.9%)
  clip-path: polygon(50% 50%, 50% 0%, 73.5% 5.9%, 50% 50%);
  transform-origin: 50% 50%;

  &.active {
    &.firstRound {
      border-top-color: var(--color-blue-500);
      filter: drop-shadow(0 0 4px var(--color-blue-400));
    }

    &.secondRound {
      border-top-color: var(--color-orange-500);
      filter: drop-shadow(0 0 4px var(--color-orange-400));
    }
  }
}
